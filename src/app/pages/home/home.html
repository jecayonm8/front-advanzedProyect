<main class="page">
  <!-- Hero Section -->
  <section class="hero">
    <div class="hero__content">
      <span class="hero__eyebrow">Encuentra tu lugar perfecto</span>
      <h1 class="hero__title">Alojamientos en Colombia</h1>
      <p class="hero__subtitle">
        Miles de opciones para tu próxima aventura
      </p>
    </div>
  </section>

<<<<<<< HEAD
  <!-- Formulario de Búsqueda -->
  <section class="search-section">
    <div class="container">
      <form [formGroup]="searchForm" (ngSubmit)="performSearch()" class="search-form">
        <div class="search-form__main">
          <!-- Ciudad -->
          <div class="search-field">
            <label for="city" class="search-label">Destino</label>
            <input
              type="text"
              id="city"
              formControlName="city"
              class="search-input"
              placeholder="¿Dónde quieres ir?"
            />
          </div>
=======
    <div class="hero__card mt-4 ">
      <div class="hero__card-header d-flex align-items-center justify-content-between">
        <div>
          <h5 class="mb-0"></h5>
          
        </div>
      </div>
>>>>>>> 283c68e203b51c8db8dcabbefe445126d9804903

          <!-- Check-in -->
          <div class="search-field">
            <label for="checkIn" class="search-label">Llegada</label>
            <input
              type="date"
              id="checkIn"
              formControlName="checkIn"
              class="search-input"
            />
          </div>

          <!-- Check-out -->
          <div class="search-field">
            <label for="checkOut" class="search-label">Salida</label>
            <input
              type="date"
              id="checkOut"
              formControlName="checkOut"
              class="search-input"
            />
          </div>

          <!-- Huéspedes -->
          <div class="search-field">
            <label for="guestNumber" class="search-label">Huéspedes</label>
            <input
              type="number"
              id="guestNumber"
              formControlName="guestNumber"
              class="search-input"
              placeholder="1"
              min="1"
            />
          </div>

          <!-- Botón de búsqueda -->
          <div class="search-field search-actions">
            <button type="submit" class="btn btn-primary search-btn" [disabled]="isLoading" (click)="currentPage = 0">
              <span class="material-symbols-rounded" *ngIf="!isLoading">search</span>
              <span class="spinner-border spinner-border-sm" *ngIf="isLoading"></span>
              <span class="d-none d-sm-inline">Buscar</span>
            </button>
          </div>
        </div>

        <!-- Filtros adicionales -->
        <div class="search-form__advanced" *ngIf="amenitiesOptions.length > 0">
          <details class="filters-toggle">
            <summary class="filters-toggle__summary">
              <span class="material-symbols-rounded">tune</span>
              Filtros avanzados
            </summary>
            <div class="filters-content">
              <!-- Precios -->
              <div class="filter-group">
                <label class="filter-label">Precio por noche</label>
                <div class="price-inputs">
                  <input
                    type="number"
                    formControlName="minPrice"
                    class="form-control form-control-sm"
                    placeholder="Mín"
                    min="0"
                  />
                  <input
                    type="number"
                    formControlName="maxPrice"
                    class="form-control form-control-sm"
                    placeholder="Máx"
                    min="0"
                  />
                </div>
              </div>

              <!-- Amenities -->
              <div class="filter-group">
                <label class="filter-label">Servicios</label>
                <div class="amenities-grid">
                  <div *ngFor="let amenity of amenitiesOptions" class="amenity-item">
                    <input
                      type="checkbox"
                      [id]="'amenity-' + amenity.value"
                      [checked]="(searchForm.get('amenities')?.value || []).includes(amenity.value)"
                      (change)="onAmenityToggle(amenity.value, $event.target.checked)"
                      class="amenity-checkbox"
                    />
                    <label [for]="'amenity-' + amenity.value" class="amenity-label">
                      {{ amenity.label }}
                    </label>
                  </div>
                </div>
              </div>
            </div>
          </details>
        </div>
      </form>
    </div>
  </section>

  <!-- Resultados de Búsqueda -->
  <section class="search-results">
    <div class="container">
      <div class="results-header" *ngIf="places.length > 0 || noResults">
        <h2 class="results-title">
          {{ places.length > 0 ? places.length + ' alojamientos encontrados' : 'No se encontraron resultados' }}
        </h2>
        <button type="button" class="btn btn-outline-secondary btn-sm" (click)="resetSearch()">
          Limpiar filtros
        </button>
      </div>

      <!-- Grid de Resultados -->
      <div class="places-grid" *ngIf="places.length > 0">
        <article *ngFor="let place of places; trackBy: trackById" class="place-card">
          <div class="place-card__media">
            <img
              [src]="place.photo_url || '/assets/img/fallback.svg'"
              [alt]="place.title"
              loading="lazy"
              class="img-fluid"
            />
            <div class="place-card__overlay">
              <span class="place-card__rating">
                <span class="material-symbols-rounded">star</span>
                {{ place.average_rating | number:'1.0-1' }}
              </span>
            </div>
          </div>
          <div class="place-card__body">
            <h3 class="place-card__title">{{ place.title }}</h3>
            <p class="place-card__location">
              <span class="material-symbols-rounded">location_on</span>
              {{ place.city }}
            </p>
            <p class="place-card__price">
              <strong>{{ place.price | currency:'COP':'symbol':'1.0-0' }}</strong>
              <span class="text-muted">/noche</span>
            </p>
            <a routerLink="/place/{{place.id}}" class="btn btn-primary btn-sm w-100">
              Ver detalles
            </a>
          </div>
        </article>
      </div>

      <!-- Mensaje cuando no hay resultados -->
      <div class="no-results" *ngIf="noResults && !isLoading">
        <div class="no-results__content">
          <span class="material-symbols-rounded no-results__icon">search_off</span>
          <h3>No encontramos alojamientos</h3>
          <p>Intenta ajustar tus filtros de búsqueda para encontrar más opciones.</p>
          <button type="button" class="btn btn-primary" (click)="resetSearch()">
            Limpiar filtros
          </button>
        </div>
      </div>

      <!-- Paginación -->
      <nav aria-label="Navegación de páginas" *ngIf="totalPages > 1" class="mt-4">
        <ul class="pagination justify-content-center">
          <!-- Botón Anterior -->
          <li class="page-item" [class.disabled]="currentPage === 0">
            <button class="page-link" (click)="changePage(currentPage - 1)" [disabled]="currentPage === 0">
              <span aria-hidden="true">&laquo;</span>
            </button>
          </li>

          <!-- Números de página -->
          <li
            *ngFor="let page of getVisiblePages(); let i = index; trackBy: trackByPage"
            class="page-item"
            [class.active]="page === currentPage"
          >
            <button class="page-link" (click)="changePage(page)">
              {{ page + 1 }}
            </button>
          </li>

          <!-- Botón Siguiente -->
          <li class="page-item" [class.disabled]="currentPage >= totalPages - 1">
            <button class="page-link" (click)="changePage(currentPage + 1)" [disabled]="currentPage >= totalPages - 1">
              <span aria-hidden="true">&raquo;</span>
            </button>
          </li>
        </ul>

        <!-- Información de página -->
        <p class="text-center text-muted mt-2 mb-0">
          Página {{ currentPage + 1 }} de {{ totalPages }}
        </p>
      </nav>

      <!-- Loading -->
      <div class="loading" *ngIf="isLoading">
        <div class="spinner-border text-primary" role="status">
          <span class="visually-hidden">Cargando...</span>
        </div>
        <p class="mt-2">Buscando alojamientos...</p>
      </div>
    </div>
  </section>

  <!-- Mapa -->
  <div id="map" class="map-container" [class.map-hidden]="places.length === 0"></div>
</main>