<main class="page">
  <header class="page__heading">
    <h1 class="page__title">Cambiar contraseña</h1>
    <p class="page__subtitle">Actualiza tu contraseña para mantener tu cuenta segura.</p>
  </header>

  <form class="form-card" [formGroup]="changePasswordForm" (ngSubmit)="changePassword()" novalidate>
    <div class="form-card_grid form-card_grid--two-columns">
      <div class="form-group form-group--full">
        <label for="current-password">Contraseña actual</label>
        <input id="current-password" type="password" formControlName="currentPassword" placeholder="Ingresa tu contraseña actual" />
        @if (changePasswordForm.get('currentPassword')?.invalid && changePasswordForm.get('currentPassword')?.touched) {
          @if (changePasswordForm.get('currentPassword')?.errors?.['required']) {
            <small class="form-error">La contraseña actual es requerida.</small>
          }
          @if (changePasswordForm.get('currentPassword')?.errors?.['minlength']) {
            <small class="form-error">La contraseña debe tener al menos 8 caracteres.</small>
          }
        }
      </div>

      <div class="form-group form-group--full">
        <label for="new-password">Nueva contraseña</label>
        <input id="new-password" type="password" formControlName="newPassword" placeholder="Ingresa tu nueva contraseña" />
        @if (changePasswordForm.get('newPassword')?.invalid && changePasswordForm.get('newPassword')?.touched) {
          @if (changePasswordForm.get('newPassword')?.errors?.['required']) {
            <small class="form-error">La nueva contraseña es requerida.</small>
          }
          @if (changePasswordForm.get('newPassword')?.errors?.['minlength']) {
            <small class="form-error">La contraseña debe tener al menos 8 caracteres.</small>
          }
        }
      </div>

      <div class="form-group form-group--full">
        <label for="confirm-password">Confirmar nueva contraseña</label>
        <input id="confirm-password" type="password" formControlName="confirmPassword" placeholder="Confirma tu nueva contraseña" />
        @if (changePasswordForm.get('confirmPassword')?.invalid && changePasswordForm.get('confirmPassword')?.touched) {
          @if (changePasswordForm.get('confirmPassword')?.errors?.['required']) {
            <small class="form-error">La confirmación es requerida.</small>
          }
          @if (changePasswordForm.get('confirmPassword')?.errors?.['mismatch']) {
            <small class="form-error">Las contraseñas no coinciden.</small>
          }
        }
      </div>
    </div>

    <button type="submit" [disabled]="changePasswordForm.invalid">Cambiar contraseña</button>
  </form>
</main>