<main class="page page--narrow">
  <header class="page__heading">
    <h1 class="page__title">Crea tu cuenta</h1>
    <p class="page__subtitle">Únete a la comunidad de anfitriones y publica tus alojamientos.</p>
  </header>

  <form class="form-card" [formGroup]="registerForm" (ngSubmit)="createUser()" novalidate>
    <div class="form-card__grid form-card__grid--two-columns">
      <div class="form-group">
        <label for="register-name">Nombre</label>
        <input id="register-name" type="text" formControlName="name" placeholder="Tu nombre completo" />
      </div>

      <div class="form-group">
        <label for="register-phone">Teléfono</label>
        <input id="register-phone" type="text" formControlName="phone" placeholder="300 000 0000" />
      </div>

      <div class="form-group">
        <label for="register-city">Ciudad</label>
        <select id="register-city" formControlName="city">
          <option value="">Seleccione una ciudad</option>
          @for (city of cities; track city) {
            <option [value]="city">{{ city }}</option>
          }
        </select>
      </div>

      <div class="form-group">
        <label for="register-photo">Foto de perfil</label>
        <input id="register-photo" type="file" formControlName="photoUrl" (change)="onFileChange($event)" />
        <small class="form-helper">Formatos permitidos: JPG o PNG (máx. 5MB)</small>
      </div>

      <div class="form-group">
        <label for="register-birth">Fecha de nacimiento</label>
        <input id="register-birth" type="date" formControlName="dateBirth" />
      </div>

      <div class="form-group">
        <label for="register-email">Email</label>
        <input id="register-email" type="email" formControlName="email" placeholder="correo@ejemplo.com" />
      </div>

      <div class="form-group">
        <label for="register-password">Contraseña</label>
        <input id="register-password" type="password" formControlName="password" placeholder="••••••" />
      </div>

      <div class="form-group">
        <label for="register-repeat-password">Repetir contraseña</label>
        <input id="register-repeat-password" type="password" formControlName="repeatPassword" placeholder="••••••" />
      </div>

      @if (registerForm.hasError('passwordsMismatch')) {
        <div class="alert alert-danger" role="alert">Las contraseñas no coinciden</div>
        }  
    </div>

    <div class="d-flex justify-content-center">
        <button class="btn btn-primary d-flex align-items-center justify-content-center gap-1" type="submit"
            [disabled]="registerForm.invalid">
            <span class="material-symbols-rounded"></span>
            Registrarse
        </button>
    </div>
  </form>
</main>
